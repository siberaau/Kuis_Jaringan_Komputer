
<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Kuis Jaringan CLI (CSV Export)</title>
  <style>
    body { font-family: monospace; background: #1e1e1e; color: #d4d4d4; padding: 20px; }
    .terminal-box { background: #2d2d2d; padding: 20px; border-radius: 10px; max-width: 800px; margin: auto; }
    .input-section, .terminal, .quiz { margin-bottom: 20px; }
    input, select, button, textarea { font-family: monospace; padding: 5px; font-size: 14px; }
    textarea { width: 100%; height: 120px; background: #1e1e1e; color: #d4d4d4; border: 1px solid #444; }
    .terminal-output { background: #1e1e1e; border: 1px solid #555; padding: 10px; min-height: 100px; margin-top: 10px; white-space: pre-wrap; }
  </style>
</head>
<body>
<div class="terminal-box">
  <h2>Simulasi CLI & Kuis Jaringan (CSV Export)</h2>

  <div class="input-section">
    <label>Nama Taruna:</label><br><input type="text" id="nama"><br>
    <label>Kelas:</label><br><input type="text" id="kelas"><br>
    <label>Nomor AK:</label><br><input type="text" id="noak"><br>
  </div>

  <div class="terminal">
    <label>Simulasi CLI (contoh: <code>ping google.com</code>):</label><br>
    <input type="text" id="cliInput" placeholder="Ketik perintah CLI di sini" style="width: 100%;" onkeydown="if(event.key==='Enter')runCommand()"><br>
    <button onclick="runCommand()">Jalankan</button>
    <div class="terminal-output" id="cliOutput"></div>
  </div>

  <div class="quiz">
    <label>Soal: Fungsi utama dari nslookup?</label><br>
    <select id="quizAnswer">
      <option value="">-- Pilih jawaban --</option>
      <option value="A">A. Mengecek port server</option>
      <option value="B">B. Menyambungkan WiFi</option>
      <option value="C">C. Melihat informasi DNS dari domain</option>
      <option value="D">D. Menghapus file cache</option>
    </select>
  </div>

  <button onclick="submitAll()">Kirim Jawaban & Unduh CSV</button>
  <div id="status"></div>
</div>

<script>
let log = [];

function runCommand() {
  const input = document.getElementById("cliInput").value.trim();
  if (!input) return;
  log.push(input);
  let output = "";

  if (input.startsWith("ping")) {
    output = "Pinging " + input.split(" ")[1] + " with 32 bytes of data:\nReply from 142.250.190.14: bytes=32 time=12ms TTL=54";
  } else if (input.startsWith("nslookup")) {
    output = "Server:  dns.google\nAddress:  8.8.8.8\n\nNon-authoritative answer:\nName:    " + input.split(" ")[1] + "\nAddress: 142.250.190.14";
  } else if (input.startsWith("whois")) {
    output = "WHOIS lookup for " + input.split(" ")[1] + ":\nRegistrar: Google LLC\nCreation Date: 1997-09-15";
  } else if (input.startsWith("traceroute") || input.startsWith("tracert")) {
    output = "Tracing route to " + input.split(" ")[1] + " over a maximum of 30 hops:\n1 <1 ms 192.168.1.1\n2 10 ms 142.250.190.14";
  } else {
    output = "Perintah tidak dikenal.";
  }

  document.getElementById("cliOutput").textContent += "\n$ " + input + "\n" + output + "\n";
  document.getElementById("cliInput").value = "";
}

function submitAll() {
  const nama = document.getElementById("nama").value.trim();
  const kelas = document.getElementById("kelas").value.trim();
  const noak = document.getElementById("noak").value.trim();
  const jawaban = document.getElementById("quizAnswer").value;

  if (!nama || !kelas || !noak || !jawaban) {
    alert("Mohon lengkapi semua data dan jawaban.");
    return;
  }

  const skor = (jawaban === "C") ? 1 : 0;
  const now = new Date().toLocaleString();
  const csv = [
    ["Timestamp", "Nama", "Kelas", "NoAK", "Skor", "Total", "Jawaban", "CLI Log"],
    [now, nama, kelas, noak, skor, 1, jawaban, log.join("\n")]
  ];

  let csvContent = "data:text/csv;charset=utf-8," + csv.map(e => e.join(",")).join("\n");
  const encodedUri = encodeURI(csvContent);
  const link = document.createElement("a");
  link.setAttribute("href", encodedUri);
  link.setAttribute("download", "hasil_kuis_" + nama + ".csv");
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);

  document.getElementById("status").innerHTML = "<b>âœ… Data berhasil disiapkan & CSV diunduh</b>";
}
</script>
</body>
</html>
